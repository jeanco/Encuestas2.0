//var poblaciones = [{"value":"0","label":"NoCapturado","desc_estado":"NoCapturado","id_estado":"0","locacion":"0"},{"value":"ABALA","label":"ABALA","desc_estado":"YUC","id_estado":"31","locacion":"001"},{"value":"ABASOLO T","label":"ABASOLO","desc_estado":"TAMPS","id_estado":"28","locacion":"001"},{"value":"ABASOLO N","label":"ABASOLO","desc_estado":"N L","id_estado":"19","locacion":"001"},{"value":"ABASOLO G","label":"ABASOLO","desc_estado":"GTO","id_estado":"11","locacion":"001"},{"value":"ABASOLO C","label":"ABASOLO","desc_estado":"COAH","id_estado":"05","locacion":"001"},{"value":"ABEJONES","label":"ABEJONES","desc_estado":"OAX","id_estado":"20","locacion":"001"},{"value":"ACACO","label":"ACACOYAGUA","desc_estado":"CHIS","id_estado":"07","locacion":"001"},{"value":"ACAJETE P","label":"ACAJETE","desc_estado":"PUE","id_estado":"21","locacion":"001"},{"value":"ACAJETE V","label":"ACAJETE","desc_estado":"VER","id_estado":"30","locacion":"001"},{"value":"ACALA","label":"ACALA","desc_estado":"CHIS","id_estado":"07","locacion":"002"},{"value":"ACAMBARO","label":"ACAMBARO","desc_estado":"GTO","id_estado":"11","locacion":"002"},{"value":"ACAMBAY","label":"ACAMBAY","desc_estado":"MEX","id_estado":"15","locacion":"001"},{"value":"ACANCEH","label":"ACANCEH","desc_estado":"YUC","id_estado":"31","locacion":"002"},{"value":"ACAP","label":"ACAPETAHUA","desc_estado":"CHIS","id_estado":"07","locacion":"003"},{"value":"ACAPETLAHUAYA","label":"ACAPETLAHUAYA","desc_estado":"GRO","id_estado":"12","locacion":"031"},{"value":"ACAPONETA","label":"ACAPONETA","desc_estado":"NAY","id_estado":"18","locacion":"001"},{"value":"ACA","label":"ACAPULCO DE JUAREZ","desc_estado":"GRO","id_estado":"12","locacion":"001"},{"value":"ACATIC","label":"ACATIC","desc_estado":"JAL","id_estado":"14","locacion":"001"},{"value":"ACATLAN V","label":"ACATLAN","desc_estado":"VER","id_estado":"30","locacion":"002"},{"value":"ACATLAN H","label":"ACATLAN","desc_estado":"HGO","id_estado":"13","locacion":"001"},{"value":"ACATLAN J","label":"ACATLAN DE JUAREZ","desc_estado":"JAL","id_estado":"14","locacion":"002"},{"value":"ACATLAN P","label":"ACATLAN DE OSORIO","desc_estado":"PUE","id_estado":"21","locacion":"003"},{"value":"ACATLAN O","label":"ACATLAN DE PEREZ FIGUEROA","desc_estado":"OAX","id_estado":"20","locacion":"002"},{"value":"ACAT","label":"ACATZINGO DE HIDALGO","desc_estado":"PUE","id_estado":"21","locacion":"004"},{"value":"ACAX","label":"ACAXOCHITLAN","desc_estado":"HGO","id_estado":"13","locacion":"002"},{"value":"ACAXTLAHUACAN","label":"ACAXTLAHUACAN DE ALBINO ZERTUCHE","desc_estado":"PUE","id_estado":"21","locacion":"011"},{"value":"ACAYUCA","label":"ACAYUCA","desc_estado":"HGO","id_estado":"13","locacion":"082"},{"value":"ACAY","label":"ACAYUCAN","desc_estado":"VER","id_estado":"30","locacion":"003"},{"value":"ACOLMAN","label":"ACOLMAN DE NEZAHUALCOYOTL","desc_estado":"MEX","id_estado":"15","locacion":"002"},{"value":"ACONCHI","label":"ACONCHI","desc_estado":"SON","id_estado":"26","locacion":"001"},{"value":"ACTEOPAN","label":"ACTEOPAN","desc_estado":"PUE","id_estado":"21","locacion":"005"},{"value":"ACTOPAN V","label":"ACTOPAN","desc_estado":"VER","id_estado":"30","locacion":"004"},{"value":"ACTO","label":"ACTOPAN","desc_estado":"HGO","id_estado":"13","locacion":"003"},{"value":"ACUAMANALA","label":"ACUAMANALA","desc_estado":"TLAX","id_estado":"29","locacion":"022"},{"value":"ACUITZIO","label":"ACUITZIO DEL CANJE","desc_estado":"MICH","id_estado":"16","locacion":"001"},{"value":"ACULA","label":"ACULA","desc_estado":"VER","id_estado":"30","locacion":"005"},{"value":"ACULCO","label":"ACULCO DE ESPINOZA","desc_estado":"MEX","id_estado":"15","locacion":"003"},{"value":"ACULTZINGO","label":"ACULTZINGO","desc_estado":"VER","id_estado":"30","locacion":"006"},{"value":"ACU\u00d1A","label":"ACU\u00d1A","desc_estado":"COAH","id_estado":"05","locacion":"002"},{"value":"AB","label":"AGUA BLANCA","desc_estado":"HGO","id_estado":"13","locacion":"004"},{"value":"AD","label":"AGUA DULCE","desc_estado":"VER","id_estado":"30","locacion":"204"},{"value":"AP","label":"AGUA PRIETA","desc_estado":"SON","id_estado":"26","locacion":"002"},{"value":"AGUALEGUAS","label":"AGUALEGUAS","desc_estado":"N L","id_estado":"19","locacion":"002"},{"value":"AGS","label":"AGUASCALIENTES","desc_estado":"AGS","id_estado":"01","locacion":"001"},{"value":"AGUILILLA","label":"AGUILILLA","desc_estado":"MICH","id_estado":"16","locacion":"002"},{"value":"AHUACATLAN P","label":"AHUACATLAN","desc_estado":"PUE","id_estado":"21","locacion":"006"},{"value":"AHUACATLAN N","label":"AHUACATLAN","desc_estado":"NAY","id_estado":"18","locacion":"002"},{"value":"AHUACUOTZINGO","label":"AHUACUOTZINGO","desc_estado":"GRO","id_estado":"12","locacion":"002"},{"value":"AHUALULCO J","label":"AHUALULCO DE MERCADO","desc_estado":"JAL","id_estado":"14","locacion":"003"},{"value":"AHUALULCO SLP","label":"AHUALULCO DEL SONIDO","desc_estado":"SLP","id_estado":"24","locacion":"001"},{"value":"AHUATLAN","label":"AHUATLAN","desc_estado":"PUE","id_estado":"21","locacion":"007"},{"value":"AHUA","label":"AHUAZOTEPEC","desc_estado":"PUE","id_estado":"21","locacion":"008"},{"value":"AHUEHUETITLA","label":"AHUEHUETITLA","desc_estado":"PUE","id_estado":"21","locacion":"009"},{"value":"AHUMADA","label":"AHUMADA","desc_estado":"CHIH","id_estado":"08","locacion":"001"},{"value":"AJACUBA","label":"AJACUBA","desc_estado":"HGO","id_estado":"13","locacion":"005"},{"value":"AJALPAN","label":"AJALPAN","desc_estado":"PUE","id_estado":"21","locacion":"010"},{"value":"AJUCHITLAN","label":"AJUCHITLAN DEL PROGRESO","desc_estado":"GRO","id_estado":"12","locacion":"003"},{"value":"AKIL","label":"AKIL","desc_estado":"YUC","id_estado":"31","locacion":"003"},{"value":"ALAMO","label":"ALAMO","desc_estado":"VER","id_estado":"30","locacion":"160"},{"value":"ALAMOS","label":"ALAMOS","desc_estado":"SON","id_estado":"26","locacion":"003"},{"value":"ALAQUINES","label":"ALAQUINES","desc_estado":"SLP","id_estado":"24","locacion":"002"},{"value":"ALCOZAUCA","label":"ALCOZAUCA DE GUERRERO","desc_estado":"GRO","id_estado":"12","locacion":"004"},{"value":"ALD","label":"ALDAMA","desc_estado":"CHIH","id_estado":"08","locacion":"002"},{"value":"ALDAMA T","label":"ALDAMA","desc_estado":"TAMPS","id_estado":"28","locacion":"002"},{"value":"ALDAMAS","label":"ALDAMAS,OS","desc_estado":"N L","id_estado":"19","locacion":"003"},{"value":"ALFAJAYUCAN","label":"ALFAJAYUCAN","desc_estado":"HGO","id_estado":"13","locacion":"006"},{"value":"ALJOJUCA","label":"ALJOJUCA","desc_estado":"PUE","id_estado":"21","locacion":"012"},{"value":"ALLENDE","label":"ALLENDE","desc_estado":"COAH","id_estado":"05","locacion":"003"},{"value":"ALLENDE N","label":"ALLENDE","desc_estado":"N L","id_estado":"19","locacion":"004"},{"value":"ALMOLOYA H","label":"ALMOLOYA","desc_estado":"HGO","id_estado":"13","locacion":"007"},{"value":"ALMOLOYA A","label":"ALMOLOYA DE ALQUISIRAS","desc_estado":"MEX","id_estado":"15","locacion":"004"},{"value":"ALMOLOYA J","label":"ALMOLOYA DE JUAREZ","desc_estado":"MEX","id_estado":"15","locacion":"005"},{"value":"ALMOLOYA R","label":"ALMOLOYA DEL RIO","desc_estado":"MEX","id_estado":"15","locacion":"006"},{"value":"ALPATLAHUAC","label":"ALPATLAHUAC","desc_estado":"VER","id_estado":"30","locacion":"008"},{"value":"ALPOYECA","label":"ALPOYECA","desc_estado":"GRO","id_estado":"12","locacion":"005"},{"value":"ALPUYECA","label":"ALPUYECA","desc_estado":"MOR","id_estado":"17","locacion":"028"},{"value":"ALTA","label":"ALTAMIRA","desc_estado":"TAMPS","id_estado":"28","locacion":"003"},{"value":"ALT","label":"ALTAMIRANO","desc_estado":"CHIS","id_estado":"07","locacion":"004"},{"value":"ALTAR","label":"ALTAR","desc_estado":"SON","id_estado":"26","locacion":"004"},{"value":"ALTEPEXI","label":"ALTEPEXI","desc_estado":"PUE","id_estado":"21","locacion":"013"},{"value":"A LUCERO","label":"ALTO LUCERO","desc_estado":"VER","id_estado":"30","locacion":"009"},{"value":"ALTOTONGA","label":"ALTOTONGA","desc_estado":"VER","id_estado":"30","locacion":"010"},{"value":"ALTZAYANCA","label":"ALTZAYANCA","desc_estado":"TLAX","id_estado":"29","locacion":"004"},{"value":"ALVA","label":"ALVARADO","desc_estado":"VER","id_estado":"30","locacion":"011"},{"value":"A OBREGON M","label":"ALVARO OBREGON","desc_estado":"MICH","id_estado":"16","locacion":"003"},{"value":"AMACUECA","label":"AMACUECA","desc_estado":"JAL","id_estado":"14","locacion":"004"},{"value":"AMACU","label":"AMACUZAC","desc_estado":"MOR","id_estado":"17","locacion":"001"},{"value":"AMANALCO","label":"AMANALCO DE BECERRA","desc_estado":"MEX","id_estado":"15","locacion":"007"},{"value":"AMATAN","label":"AMATAN","desc_estado":"CHIS","id_estado":"07","locacion":"005"},{"value":"AMATENANGO F","label":"AMATENANGO DE LA FRONTERA","desc_estado":"CHIS","id_estado":"07","locacion":"006"},{"value":"AMA","label":"AMATENANGO DEL VALLE","desc_estado":"CHIS","id_estado":"07","locacion":"007"},{"value":"AMATEPEC","label":"AMATEPEC","desc_estado":"MEX","id_estado":"15","locacion":"008"},{"value":"AMATITAN","label":"AMATITAN","desc_estado":"JAL","id_estado":"14","locacion":"005"},{"value":"AMATITLAN","label":"AMATITLAN","desc_estado":"VER","id_estado":"30","locacion":"012"},{"value":"AMATLAN N","label":"AMATLAN DE CA\ufffdAS","desc_estado":"NAY","id_estado":"18","locacion":"003"},{"value":"AMATLAN V","label":"AMATLAN DE LOS REYES","desc_estado":"VER","id_estado":"30","locacion":"014"},{"value":"AMAXAC","label":"AMAXAC DE GUERRERO","desc_estado":"TLAX","id_estado":"29","locacion":"001"},{"value":"AMAYUCA","label":"AMAYUCA","desc_estado":"MOR","id_estado":"17","locacion":"010"},{"value":"AMEALCO","label":"AMEALCO DE BONFIL","desc_estado":"QRO","id_estado":"22","locacion":"001"},{"value":"AMECA","label":"AMECA","desc_estado":"JAL","id_estado":"14","locacion":"006"},{"value":"AMECAMECA","label":"AMECAMECA DE JUAREZ","desc_estado":"MEX","id_estado":"15","locacion":"009"}];
//var colonias = [{"value":"0","label":"NoCapturado","municipio":"NoCapturado","cp":"NoCapturado"},{"value":"1830SANTA","label":"SANTA ROSA XOCHIAC","municipio":"ALVARO OBREGON","cp":"1830"},{"value":"1840TORRES","label":"TORRES DE POTRERO","municipio":"ALVARO OBREGON","cp":"1840"},{"value":"1848TORRES","label":"TORRES DE POTRERO","municipio":"ALVARO OBREGON","cp":"1848"},{"value":"1849RANCHO","label":"RANCHO DEL CARMEN DEL PUEBLO SAN BARTOLO AMEYALCO","municipio":"ALVARO OBREGON","cp":"1849"},{"value":"1849RINCON","label":"RINCON DE LA BOLSA","municipio":"ALVARO OBREGON","cp":"1849"},{"value":"1850EL LIM","label":"EL LIMBO","municipio":"ALVARO OBREGON","cp":"1850"},{"value":"1850LOMAS","label":"LOMAS DEL LIMBO","municipio":"ALVARO OBREGON","cp":"1850"},{"value":"1856PARAJE","label":"PARAJE DEL CABALLITO","municipio":"ALVARO OBREGON","cp":"1856"},{"value":"1857LOMAS","label":"LOMAS DE CHAMONTOYA","municipio":"ALVARO OBREGON","cp":"1857"},{"value":"1858TLACOY","label":"TLACOYAQUE","municipio":"ALVARO OBREGON","cp":"1858"},{"value":"1859TLACOY","label":"TLACOYAQUE","municipio":"ALVARO OBREGON","cp":"1859"},{"value":"1860LOMAS","label":"LOMAS DE LA ERA","municipio":"ALVARO OBREGON","cp":"1860"},{"value":"1870LOMAS","label":"LOMAS DE LOS CEDROS","municipio":"ALVARO OBREGON","cp":"1870"},{"value":"1900JARDIN","label":"JARDINES DEL PEDREGAL","municipio":"ALVARO OBREGON","cp":"1900"},{"value":"1904SAN JE","label":"SAN JERONIMO ACULCO","municipio":"ALVARO OBREGON","cp":"1904"},{"value":"1940RANCHO","label":"RANCHO ANZALDO Y CONTRERAS","municipio":"ALVARO OBREGON","cp":"1940"},{"value":"1950PLACIO","label":"PLACIO GARDEN","municipio":"ALVARO OBREGON","cp":"1950"},{"value":"1990PEDREG","label":"PEDREGAL","municipio":"ALVARO OBREGON","cp":"1990"},{"value":"2000CENTRO","label":"CENTRO DE AZCAPOTZALCO","municipio":"AZCAPOTZALCO","cp":"2000"},{"value":"2008DELEGA","label":"DELEGACION POLITICA AZCAPOTZALCO","municipio":"AZCAPOTZALCO","cp":"2008"},{"value":"2009SAN SI","label":"SAN SIMON","municipio":"AZCAPOTZALCO","cp":"2009"},{"value":"2010LOS RE","label":"LOS REYES","municipio":"AZCAPOTZALCO","cp":"2010"},{"value":"2010NUEVO","label":"NUEVO BARRIO SAN RAFAEL","municipio":"AZCAPOTZALCO","cp":"2010"},{"value":"2010SAN RA","label":"SAN RAFAEL","municipio":"AZCAPOTZALCO","cp":"2010"},{"value":"2020SAN MA","label":"SAN MARCOS","municipio":"AZCAPOTZALCO","cp":"2020"},{"value":"2020SANTO","label":"SANTO TOMAS","municipio":"AZCAPOTZALCO","cp":"2020"},{"value":"2040DEL MA","label":"DEL MAESTRO","municipio":"AZCAPOTZALCO","cp":"2040"},{"value":"2040SAN SE","label":"SAN SEBASTIAN","municipio":"AZCAPOTZALCO","cp":"2040"},{"value":"2050LIBERT","label":"LIBERTAD","municipio":"AZCAPOTZALCO","cp":"2050"},{"value":"2050SANTA","label":"SANTA MARIA MALINALCO","municipio":"AZCAPOTZALCO","cp":"2050"},{"value":"2050WAKE","label":"WAKE","municipio":"AZCAPOTZALCO","cp":"2050"},{"value":"2060SINDIC","label":"SINDICATO MEXICANO DE ELECTRICISTAS","municipio":"AZCAPOTZALCO","cp":"2060"},{"value":"2060UN HOG","label":"UN HOGAR PARA CADA TRABAJADOR","municipio":"AZCAPOTZALCO","cp":"2060"},{"value":"2070AZCAPO","label":"AZCAPOTZALCO","municipio":"AZCAPOTZALCO","cp":"2070"},{"value":"2070DEL RE","label":"DEL RECREO","municipio":"AZCAPOTZALCO","cp":"2070"},{"value":"2070NEXTEN","label":"NEXTENGO","municipio":"AZCAPOTZALCO","cp":"2070"},{"value":"2070PALEST","label":"PALESTINA","municipio":"AZCAPOTZALCO","cp":"2070"},{"value":"2080CLAVER","label":"CLAVERIA","municipio":"AZCAPOTZALCO","cp":"2080"},{"value":"2080SECTOR","label":"SECTOR NAVAL","municipio":"AZCAPOTZALCO","cp":"2080"},{"value":"2090SAN AL","label":"SAN ALVARO","municipio":"AZCAPOTZALCO","cp":"2090"},{"value":"2099ANGEL","label":"ANGEL ZIMBRON","municipio":"AZCAPOTZALCO","cp":"2099"},{"value":"2100EL ROS","label":"EL ROSARIO","municipio":"AZCAPOTZALCO","cp":"2100"},{"value":"2100LOS OY","label":"LOS OYAMELES","municipio":"AZCAPOTZALCO","cp":"2100"},{"value":"2109CROC 6","label":"CROC 6 OLIMPIA","municipio":"AZCAPOTZALCO","cp":"2109"},{"value":"2109MANUEL","label":"MANUEL RIVERA ANAYA CROC 1","municipio":"AZCAPOTZALCO","cp":"2109"},{"value":"2110ECOLOG","label":"ECOLOGICA NOVEDADES IMPACTO","municipio":"AZCAPOTZALCO","cp":"2110"},{"value":"2110SAN PA","label":"SAN PABLO XALPA","municipio":"AZCAPOTZALCO","cp":"2110"},{"value":"2111CENTRO","label":"CENTRO NAC DE ACOPIO","municipio":"CENTRO NACIONAL DE ACOPIO","cp":"2111"},{"value":"2120SAN MA","label":"SAN MARTIN XOCHINAHUAC","municipio":"AZCAPOTZALCO","cp":"2120"},{"value":"2125SAN MA","label":"SAN MARTIN XOCHINAHUAC","municipio":"AZCAPOTZALCO","cp":"2125"},{"value":"2127TEPANT","label":"TEPANTONGO","municipio":"AZCAPOTZALCO","cp":"2127"},{"value":"2128NUEVA","label":"NUEVA EL ROSARIO","municipio":"AZCAPOTZALCO","cp":"2128"},{"value":"2129NUEVA","label":"NUEVA ESPANA","municipio":"AZCAPOTZALCO","cp":"2129"},{"value":"2130TIERRA","label":"TIERRA NUEVA","municipio":"AZCAPOTZALCO","cp":"2130"},{"value":"2140SANTA","label":"SANTA INES","municipio":"AZCAPOTZALCO","cp":"2140"},{"value":"2150AZCAPO","label":"AZCAPOTZALCO PASTEROS","municipio":"AZCAPOTZALCO","cp":"2150"},{"value":"2150PASTER","label":"PASTEROS","municipio":"AZCAPOTZALCO","cp":"2150"},{"value":"2240TICOMA","label":"TICOMAN","municipio":"AZCAPOTZALCO","cp":"2240"},{"value":"2160SANTO","label":"SANTO DOMINGO","municipio":"AZCAPOTZALCO","cp":"2160"},{"value":"2169VILLAS","label":"VILLAS DE AZCAPOTZALCO","municipio":"AZCAPOTZALCO","cp":"2169"},{"value":"2200REYNOS","label":"REYNOSA TAMAULIPAS","municipio":"AZCAPOTZALCO","cp":"2200"},{"value":"2230SANTA","label":"SANTA BARBARA","municipio":"AZCAPOTZALCO","cp":"2230"},{"value":"2240SAN AN","label":"SAN ANDRES","municipio":"AZCAPOTZALCO","cp":"2240"},{"value":"2240SAN AN","label":"SAN ANDRES FASE II","municipio":"AZCAPOTZALCO","cp":"2240"},{"value":"2250SANTA","label":"SANTA CATARINA","municipio":"AZCAPOTZALCO","cp":"2250"},{"value":"2260PITOLA","label":"PITOLACA","municipio":"AZCAPOTZALCO","cp":"2260"},{"value":"2300INDUST","label":"INDUSTRIAL VALLEJO","municipio":"AZCAPOTZALCO","cp":"2300"},{"value":"2310FERRER","label":"FERRERIA","municipio":"AZCAPOTZALCO","cp":"2310"},{"value":"2320SAN AN","label":"SAN ANDRES DE LAS SALINAS","municipio":"AZCAPOTZALCO","cp":"2320"},{"value":"2330HUAUTL","label":"HUAUTLA DE LAS SALINAS","municipio":"AZCAPOTZALCO","cp":"2330"},{"value":"2340SANTA","label":"SANTA CRUZ DE LAS SALINAS","municipio":"AZCAPOTZALCO","cp":"2340"},{"value":"2350JARDIN","label":"JARDINES DE CEYLAN","municipio":"AZCAPOTZALCO","cp":"2350"},{"value":"2360LAS SA","label":"LAS SALINAS","municipio":"AZCAPOTZALCO","cp":"2360"},{"value":"2400RINCON","label":"RINCONADA EL OLIVAR","municipio":"AZCAPOTZALCO","cp":"2400"},{"value":"2400SAN JU","label":"SAN JUAN TLIHUACA","municipio":"AZCAPOTZALCO","cp":"2400"},{"value":"2409ROSEND","label":"ROSENDO SALAZAR","municipio":"AZCAPOTZALCO","cp":"2409"},{"value":"2410PRADOS","label":"PRADOS DEL ROSARIO","municipio":"AZCAPOTZALCO","cp":"2410"},{"value":"2419TRABAJ","label":"TRABAJADORES DE PEMEX","municipio":"AZCAPOTZALCO","cp":"2419"},{"value":"2420EX-HAC","label":"EX-HACIENDA EL ROSARIO","municipio":"AZCAPOTZALCO","cp":"2420"},{"value":"2420FRANCI","label":"FRANCISCO VILLA","municipio":"AZCAPOTZALCO","cp":"2420"},{"value":"2430PRESID","label":"PRESIDENTE MADERO","municipio":"AZCAPOTZALCO","cp":"2430"},{"value":"2440PROVID","label":"PROVIDENCIA","municipio":"AZCAPOTZALCO","cp":"2440"},{"value":"2450LAS TR","label":"LAS TRANCAS","municipio":"AZCAPOTZALCO","cp":"2450"},{"value":"2450MIGUEL","label":"MIGUEL HIDALGO","municipio":"AZCAPOTZALCO","cp":"2450"},{"value":"2459TEZOZO","label":"TEZOZOMOC","municipio":"AZCAPOTZALCO","cp":"2459"},{"value":"2460AXOLAH","label":"AXOLAHUA","municipio":"AZCAPOTZALCO","cp":"2460"},{"value":"2460LA PRE","label":"LA PRECIOSA","municipio":"AZCAPOTZALCO","cp":"2460"},{"value":"2470AMPLIA","label":"AMPLIACION PETROLERA","municipio":"AZCAPOTZALCO","cp":"2470"},{"value":"2479LAZARO","label":"LAZARO CARDENAS","municipio":"AZCAPOTZALCO","cp":"2479"},{"value":"2480PETROL","label":"PETROLERA","municipio":"AZCAPOTZALCO","cp":"2480"},{"value":"2490KERVIN","label":"KERVIN","municipio":"AZCAPOTZALCO","cp":"2490"},{"value":"2490SAN MA","label":"SAN MATEO","municipio":"AZCAPOTZALCO","cp":"2490"},{"value":"2500UNIDAD","label":"UNIDAD CUITLAHUAC","municipio":"AZCAPOTZALCO","cp":"2500"},{"value":"2510EL JAG","label":"EL JAG?EY","municipio":"AZCAPOTZALCO","cp":"2510"},{"value":"2510PANTAC","label":"PANTACO","municipio":"AZCAPOTZALCO","cp":"2510"},{"value":"2519EL JAG","label":"EL JAG?EY","municipio":"AZCAPOTZALCO","cp":"2519"},{"value":"2520ESTACI","label":"ESTACION PANTACO","municipio":"AZCAPOTZALCO","cp":"2520"},{"value":"2525GRANJA","label":"GRANJAS PANTACO CAMPAMENTO FERROCARRILERO","municipio":"AZCAPOTZALCO","cp":"2525"},{"value":"2530JARDIN","label":"JARDIN AZPEITIA","municipio":"AZCAPOTZALCO","cp":"2530"},{"value":"2540HOGARE","label":"HOGARES FERROCARRILEROS","municipio":"AZCAPOTZALCO","cp":"2540"},{"value":"2600PRO-HO","label":"PRO-HOGAR","municipio":"AZCAPOTZALCO","cp":"2600"},{"value":"2630COLTON","label":"COLTONGO","municipio":"AZCAPOTZALCO","cp":"2630"},{"value":"2640MONTE","label":"MONTE ALTO","municipio":"AZCAPOTZALCO","cp":"2640"},{"value":"2650TRABAJ","label":"TRABAJADORES DE HIERRO","municipio":"AZCAPOTZALCO","cp":"2650"},{"value":"2660EUZKAD","label":"EUZKADI","municipio":"AZCAPOTZALCO","cp":"2660"},{"value":"2670COSMOP","label":"COSMOPOLITA","municipio":"AZCAPOTZALCO","cp":"2670"},{"value":"2680POTRER","label":"POTRERO DEL LLANO","municipio":"AZCAPOTZALCO","cp":"2680"},{"value":"2700SAN MI","label":"SAN MIGUEL AMANTLA","municipio":"AZCAPOTZALCO","cp":"2700"},{"value":"2710SAN IS","label":"SAN ISIDRO","municipio":"AZCAPOTZALCO","cp":"2710"},{"value":"2710SAN PE","label":"SAN PEDRO XALPA","municipio":"AZCAPOTZALCO","cp":"2710"},{"value":"2718LAS AR","label":"LAS ARMAS","municipio":"AZCAPOTZALCO","cp":"2718"}];	

	

var poblacionOrigen = $('[name = "poblacionOrigen"]');
	var estadoOrigen = $('[name = "estadoOrigen"]');
	var coloniaOrigen = $('[name = "coloniaOrigen"]');

	var poblacionDestino = $('[name = "poblacionDestino"]');
	var estadoDestino = $('[name = "estadoDestino"]');
	var coloniaDestino = $('[name = "coloniaDestino"]');

	/*var mes = $('[name=mes]'),
		sentido = $('[name=sentido]'),
		carril = $('[name=carril]'),
		anyo = $('[name=anyo]'),
		mes = $('[name=mes]'),
		dia = $('[name=dia]'),
		hora = $('[name=hora]'),
		tipoVehiculo = $('[name=tipoVehiculo]'),
		frecuencia = $('[name=frecuencia]'),
		ingreso = $('[name=ingreso]'),
		modelo = $('[name=modelo]'),
		ocupantes = $('[name=ocupantes]'),
		motivo = $('[name=motivo]'),
		carga = $('[name=carga]'),
		toneladas = $('[name=toneladas]'),
		t1 = $('[name=t1]'),
		t2 = $('[name=t2]'),
		t3 = $('[name=t3]'),
		t4 = $('[name=t4]'),
		t5 = $('[name=t5]'),
		t6 = $('[name=t6]'),
		t7 = $('[name=t7]'),
		t8 = $('[name=t8]'),
		t9 = $('[name=t9]'),
		t10 = $('[name=t10]'),
		tarjetasPd = $('[name=tarjetasPd]');*/

	// var to save all data
	var saveData = {};
		
	var setInitFields = function(data){		

		//get url vars
		var parts = window.location.search.substr(1).split("&");
		for (var i = 0; i < parts.length; i++) {
		    var temp = parts[i].split("=");
		    saveData[decodeURIComponent(temp[0])] = decodeURIComponent(temp[1]);
		}

		$('input[name=carretera]').val(saveData.carretera);
		$('input[name=estacion]').val(saveData.estacion);
		$('input[name=km]').val(saveData.km);
	}	

	setInitFields();

	var savePds = function(f,item){


		//save value and id 
		var name = f.attr('name');

		//enable carga and toneladas fields
		if(name == "tipoVehiculo"){
			saveData.descVehiculo = item.label;
			saveData.tipoVehiculo = item.value;
			activeFields(item.value[0]);			
			return;
		}
		
			saveData[name] = item.label;	
			name = name.charAt(0).toUpperCase() + name.slice(1);						
			saveData['clv'+name] = item.value;									
	};

	function clear(){
		var all = $('input.form-control');			
			$.each(all, function(index, f) {
				var field = $(f);
				if(field.attr('name') != "sentido" && field.attr('name') != "carril" && field.attr('name') != "anyo" && field.attr('name') != "mes" && field.attr('name') != "dia"){
					field.val('');
					delete saveData[field.attr('name')];
				}
			});
		setInitFields();	
	}

	$('#linkHome').click(function(event) {
		window.location.href = '../seguridad/sesiones/cerrarSesion.php';	
	});
	$('#clearForm').click(function(event) {
		clear();
	});

	var setPoblacionOrigen = function(objPoblacion){		
		if(typeof objPoblacion == "object"){
		poblacionOrigen.val(objPoblacion.label);
		estadoOrigen.val(objPoblacion.desc_estado);

		savePds(poblacionOrigen,objPoblacion);
		saveData.estadoOrigen = objPoblacion.desc_estado;
		saveData.clvEstadoOrigen = objPoblacion.id_estado;
		nexField(estadoOrigen);
		}else if(typeof objPoblacion == "string"){
			for (var i = 0; i < poblaciones.length; i++) {
				if(poblaciones[i].value == objPoblacion.toUpperCase()){
					console.log("poblaciones[i]",poblaciones[i]);
					savePds(poblacionOrigen,poblaciones[i]);
					saveData.estadoOrigen = poblaciones[i].desc_estado;
					saveData.clvEstadoOrigen = poblaciones[i].id_estado;
					nexField(estadoOrigen);
					return poblaciones[i];
				}
			};
		}

	};
	var setColoniaOrigen = function(objColonia){
		coloniaOrigen.val(objColonia.label);
		savePds(coloniaOrigen,objColonia);
	};

	var setPoblacionDestino = function(objPoblacion){
		if(typeof objPoblacion == "object"){
			poblacionDestino.val(objPoblacion.label);
			estadoDestino.val(objPoblacion.desc_estado);

			savePds(poblacionDestino,objPoblacion);
			saveData.estadoDestino = objPoblacion.desc_estado;
			saveData.clvEstadoDestino = objPoblacion.id_estado;
			nexField(poblacionDestino);
		}else if(typeof objPoblacion == "string"){
			for (var i = 0; i < poblaciones.length; i++) {
				if(poblaciones[i].value == objPoblacion.toUpperCase()){
					
					savePds(poblacionDestino,poblaciones[i]);
					saveData.estadoDestino = poblaciones[i].desc_estado;
					saveData.clvEstadoDestino = poblaciones[i].id_estado;
					nexField(estadoDestino);
					return poblaciones[i];
				}
			}
		}

	};
	var setColoniaDestino = function(objColonia){
		coloniaDestino.val(objColonia.label);
		savePds(coloniaDestino,objColonia);
	};


	var opcionesAutocomplete = function(opciones){
		return { source: opciones.catalogo, 
				select: function (event, ui) {
                		opciones.funcion(ui.item);                                          		
                    	return false;
                    }
                };
	};

	//enable
	var activeFields = function(o){
		var carga = $('[name=carga]'),
			toneladas = $('[name=toneladas]'),
			motivo = $('[name=motivo]');
		if(o == "C"){				
			carga.attr('disabled', false);
			toneladas.attr('disabled', false);	
			motivo.attr('disabled', true);
			savePds(motivo,{value:0,label:"No aplica"});
		}else if(o=="B"){
			motivo.attr('disabled', true);
			carga.attr('disabled', true);
			toneladas.attr('disabled', true);

			savePds(motivo,{value:0,label:"No aplica"});
			savePds(carga,{value:0,label:"No aplica"});
			savePds(toneladas,{value:0,label:"No aplica"});	
		}else{
			carga.attr('disabled', true);
			toneladas.attr('disabled', true);
			motivo.attr('disabled', false);

			savePds(carga,{value:0,label:"No aplica"});
			savePds(toneladas,{value:0,label:"No aplica"});
		}

		carga.removeClass('has-error');
		toneladas.removeClass('has-error');
		motivo.removeClass('has-error');	
	}	

	function validate(){		
		var all = $('input.form-control:required'),
			status = true;		
		$.each(all, function(index, f) {
			var field = $(f);
			if(!field.attr('disabled')){				
				if(saveData[field.attr('name')] == undefined) {					
					field.addClass('has-error');
					status = false;					
				}else{
					field.removeClass('has-error');	
				}	
			}			
		});

		if(!status){
			alert("Campos oblicatorios ó los datos no son validos");
			return false;
		}

		return true;		
	}

	//save buttons 
	$('#pdsGuardar').click(function(event) {
		saveData.rubro = "pds1";
		//saveData.capturista = "001";		
		var _this = $(this);

		//console.log("data to save",saveData);
		if(validate()){
			_this.attr('disabled', true);
			_this.text('Guardando ...');
			$.post('../pds1/encuesta.php', saveData, function(data, textStatus, xhr) {
				//console.log("data",jQuery.parseJSON(data));
				_this.attr('disabled', false);
				_this.text('Guardar');
				try{
					var response = jQuery.parseJSON(data);
					if(response.encuesta.status.ok){
						//alert("La encuesta se guardo correctamente...");
						$('.encuestaForm').effect( "highlight",{color:'#dff0d8',border:'#d6e9c6'},2000);
						clear();
						$('[name="hora"]').focus();
					}else{
						alert("No se pudo guardar la encuesta, intentelo de nuevo.");
						$('.encuestaForm').effect( "highlight",{color:'#f2dede',border:'#d6e9c6'},2000);
					}	
				}catch(e){
					console.log("error",e);
					$("#errorAlert").modal("show");
				}				

			});
		}
		
	});

	$('#odsGuardar').click(function(event) {
		saveData.rubro = "ods1";
		//saveData.capturista = "001";
		var _this = $(this);

		//console.log("data to save",saveData);
		if(validate()){
			_this.attr('disabled', true);
			_this.text('Guardando ...');

			$.post('../ods1/encuesta.php', saveData, function(data, textStatus, xhr) {
				_this.attr('disabled', false);
				_this.text('Guardar');

				//console.log("data",jQuery.parseJSON(data));
				try{
					var response = jQuery.parseJSON(data);
					if(response.encuesta.status.ok){
						//alert("La encuesta se guardo correctamente...");
						$('.encuestaForm').effect( "highlight",{color:'#dff0d8',border:'#d6e9c6'},2000);
						clear();
						$('[name="hora"]').focus();
					}else{
						alert("No se pudo guardar la encuesta, intentelo de nuevo.");
						$('.encuestaForm').effect( "highlight",{color:'#f2dede',border:'#d6e9c6'},2000);
					}
				}catch(e){
					console.log("error",e);
					$("#errorAlert").modal("show");
				}	

			});
		}
	});
	

	//next field 
	 function nexField (c){
     	var fields =  $('.tabCtrl:enabled'),
			currentField = fields.index(c);
			if(fields[currentField+1] != undefined){
				fields[currentField+1].focus();
			}
     };

	//show list
	var dropDown = function (ul, opciones){		
		if(opciones.municipio != undefined){
			return $("<li>").append("<a>" +" <strong>Clave:</strong> "+opciones.value + " <strong>Colonia:</strong> " + opciones.label +" <strong>Municipio:</strong> "+opciones.municipio +"</a>").appendTo(ul); 	
		}
		return $("<li>").append("<a>" + opciones.value + " - " + opciones.label + "</a>").appendTo(ul); 
    }; 

    //event select
    var seleccion = function (event, ui) {
    		
           	$(this).val(ui.item.label); 
           	//next field
			nexField($(this));
			
			//save data
			savePds($(this),ui.item);

           	return false;
        };      


     $.fn.once = function (events, callback) {
	    return this.each(function () {
	        var myCallback = function (e) {
	            callback.call(this, e);
	            $(this).off(events, myCallback);
	        };
	        $(this).on(events, myCallback);
	    });
	};    

	function oldValue(f){
		if(saveData[f.attr('name')] != undefined && f.val() == ""){
			f.val(saveData[f.attr('name')]);
		}
	}   
    
	//create autocompletes
	$(document).ready(function(){
		var all = $('.autocomplete');
		$.each(all, function(index, a) {
			 var index = $(this).data('opt'), 
			 	source = catalogos[index];			
			 $(a).autocomplete({
		        	source: source,            
		            select: seleccion
		        })
			 	.data("ui-autocomplete")._renderItem = dropDown;
			 $(a).keypress(function(event) {
			 	var keyCode = event.keyCode || window.event.keyCode,
			 		value = $(this).val().toUpperCase();
			 		
			 		if (keyCode == 13) { 
			 			for (var i = 0; i < source.length; i++) {
							if(source[i].value == value){								
								$(this).val(source[i].label);								

								//next field
								nexField($(this));

								//save data
								savePds($(this),source[i]);								
							}
						}
			 		}
			 });							
		});
		
	}).keydown(function(e){
		var keyCode = e.keyCode;
		var all = $('.tabCtrl:enabled'), 
			current = $('.tabCtrl:focus'),
			index = all.index(current);		
		if(keyCode == 39){
			if(all[index+1] != undefined){
				all[index+1].focus();	
				oldValue($(all[index]));
			}		
		}
		if(keyCode == 37){					
			if(all[index-1] != undefined){
				all[index-1].focus();
				oldValue($(all[index]));	
			}
		}			 
	});

	$('input.form-control').focus(function(event) {
		$(this).removeClass('has-error');
	 	$(this).once("mouseup keyup", function(e){      
	        $(this).select();
	    });
	});    
                          		   

        /*coloniaOrigen.autocomplete( 
                                          {
                                          	source: colonias,                                         
                                          	select: function (event, ui) {
                                          		setColoniaOrigen(ui.item);                                          		
                                          		return false;
                                          	}
                                      	  })
	 										.data("ui-autocomplete")._renderItem = function (ul, opciones) {
                                      		return $("<li>").append("<a>" + opciones.value + " - " + opciones.label + "</a>").appendTo(ul); 
                                   		   };

         coloniaDestino.autocomplete( 
                                          {
                                          	source: colonias,
                                         
                                          	select: function (event, ui) {
                                          		setColoniaDestino(ui.item);                                          		
                                          		return false;
                                          	}
                                      	  })
	 										.data("ui-autocomplete")._renderItem = function (ul, opciones) {
                                      		return $("<li>").append("<a>" + opciones.value + " - " + opciones.label + "</a>").appendTo(ul); 
                                   		   }; */   
        poblacionOrigen.autocomplete({
        	source: poblaciones,
            /*focus: function (event, ui) {                                           
            	poblacionOrigen.val(ui.item.value);
            },*/
			select: function (event, ui) {
				setPoblacionOrigen(ui.item); 
				return false;
			}
		})
		.data("ui-autocomplete")._renderItem = function (ul, opciones) {
			return $("<li>").append("<a>" + "<strong>Clave:</strong>" +opciones.value + " <strong>Población:</strong> " + opciones.label + " - <strong>Estado:</strong> " + opciones.desc_estado + "</a>").appendTo(ul); 
		};                            		                              		   
       	poblacionDestino.autocomplete({
			source: poblaciones,
			/*focus: function (event, ui) {                                           
				poblacionDestino.val(ui.item.value);
			},*/
            select: function (event, ui) {
            	setPoblacionDestino(ui.item);                                          		
                return false;
            }
        })
	 	.data("ui-autocomplete")._renderItem = function (ul, opciones) {
        	return $("<li>").append("<a>" + "<strong>Clave:</strong>" +opciones.value + " <strong>Población:</strong> " + opciones.label + " - <strong>Estado:</strong> " + opciones.desc_estado + "</a>").appendTo(ul); 
        };                              		                               		   


		var pdEntrevistaDirecta = {
			tabReturn : $('[name="hora"]'),
			tabPoblacionOrigen : poblacionOrigen,
			tabEstadoOrigen : estadoOrigen,
			tabColoniasOrigen : coloniaOrigen,
			tabPoblacionDestino : poblacionDestino,
			tabEstadoDestino : estadoDestino,
			btnGuardar : $("#btnGuardar"),
			setEvents : function(){
				var _this = this;
				//boton guardar
			    // keyup
			    $(this.btnGuardar).on("keypress",function(){
			    	_this.tabReturn.focus();
			    });
			    $(this.btnGuardar).on("keydown",function(event){
					var keyCode = event.keyCode || event.which; 
					if (keyCode == 9){ 
    					event.preventDefault(); 
    					_this.tabReturn.focus();
    				}			    	
			    });
			    //poblaciones
			    //origen
			    this.tabPoblacionOrigen.on('keypress',function(event) {
   	     	    	var keyCode = event.keyCode || event.which; 
					if (keyCode == 13) { 
						var poblacion = setPoblacionOrigen($(this).val())
    					//console.log(poblacion);
    					_this.tabEstadoOrigen.val(poblacion.desc_estado);
    					$(this).val(poblacion.label);
    				}			    
			    });

			    //destino
			     this.tabPoblacionDestino.on('keypress',function(event) {
   	     	    	var keyCode = event.keyCode || event.which; 
					if (keyCode == 13) { 
    					var poblacion = setPoblacionDestino($(this).val())
    					//console.log(poblacion);
    					_this.tabEstadoDestino.val(poblacion.desc_estado);
    					$(this).val(poblacion.label);
    				}			    
			    });

			},
			init: function(){

				this.setEvents();
			}
		};
		pdEntrevistaDirecta.init();
		
		$('#showListToday').click(function(event) {
			window.open("edit.php?idEstacion="+saveData.idEstacion+"&capturista="+saveData.capturista);		
		});

		var listEncuestas = {
			list : $('.encuestas-list .list'),
			btnList : $('#showListToday'),
			fields :  $('input.form-control'),
			btnPdsEditar : $('#pdsEditar'),
			btnOdsEditar : $('#odsEditar'),
			init : function(rubro){				
				this.load(rubro);
				this.events();
				this.getById();
			},
			load : function(rubro){				
				saveData.rubro = rubro;
				var _this = this;
				$.getJSON('../includes/getEncuestasFecha.php', saveData, function(data, textStatus) {					
					var items = $.map(data, function(item, index) {	

						var date = new Date(item.fechaCaptura.sec*1000),  
	                        year = date.getFullYear(),            
	                        day = date.getDate(),            
	                        month = date.getMonth()+1, 
	                        hours = date.getHours(),
	                        minutes = date.getMinutes(),
	                        seconds = date.getSeconds(),
	                        d = day + '/' + month + '/' + year+' '+hours+':'+minutes+':'+seconds;

						var li = $('<a>');
							li.text(d);
							li.addClass('list-group-item');
							li.data(item);
							li.click(function(){								
								_this.edit($(this).data());
							});
						return li;
					});
					
					_this.list.append(items);
				});
			},
			getById: function(){
				//get url vars
				var parts = window.location.search.substr(1).split("&"),
					data = {};
				for (var i = 0; i < parts.length; i++) {
				    var temp = parts[i].split("=");
				    if (temp[0]) {
				    	data[decodeURIComponent(temp[0])] = decodeURIComponent(temp[1]);	
				    }				    
				}
				var _this = this;
				if(data.id != undefined){
					_this.list.hide();						
					$.getJSON('../monitor/datosEncuesta.php', {id: data.id}, function(response, textStatus) {
							_this.edit(response);
					});
				}				
			},
			events : function(){
				var _this = this;
				this.btnList.click(function(event) {
							
					
				});
				this.btnPdsEditar.click(function(event) {
					_this.updateData();
					$(this).attr('enabled', true);
					$(this).text('Guardando Cambios ...');
				});
				this.btnOdsEditar.click(function(event) {
					_this.updateData();
					$(this).attr('enabled', true);
					$(this).text('Guardando Cambios ...');
				});
			},
			edit : function(data){				
				var fields = $('input.form-control'),ref = $('#numRef');
				ref.text(data._id.$id);
				saveData = data;
				saveData['id'] = data._id.$id;
				//delete saveData['_id'];
				$.each(fields, function(index, f) {
					var field = $(f),
					 	name = field.attr('name');					 	
					 	field.val(data[name]);		 
				});
			},	
			updateData : function(){
				//console.log("data to update",saveData);
				var _this = this;
				$.post('updateEncuesta.php', saveData, function(data, textStatus, xhr) {
					_this.btnPdsEditar.attr('enabled', false);
					_this.btnOdsEditar.attr('enabled', false);
					_this.btnPdsEditar.text('Guardar Cambios');
					_this.btnOdsEditar.text('Guardar Cambios');
					try{
						jQuery.parseJSON(data);					
						$('body').effect( "highlight",{color:'#dff0d8',border:'#d6e9c6'},2000);	
					}catch(e){
						$("#errorAlert").modal("show");
						console.log("error",e);						
					}
					
				});
			},		
			show : function(){
				this.list.show('slide', {direction: 'right'}, 700);
			},
			hide : function(){
				this.list.hide('slide', {direction: 'right'}, 700);
			}
		}

		//